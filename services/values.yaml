# yaml-language-server: $schema=../.helm-shared/values.schema.json

# shared values for all services

global:
  ioc_group: p47
  location: bl47p
  enabled: true

ioc-instance: &ioc-instance
  # useHostNetwork - use host network for IOC - required for Channel Access
  # to work outside of the cluster
  hostNetwork: true

  securityContext:
    runAsUser: 37887
    runAsGroup: 37887

  # affinity and tolerations to get the right nodes on pollux
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
          - matchExpressions:
              - key: beamline
                operator: In
                values:
                  - bl47p

  tolerations:
    - key: beamline
      operator: Equal
      value: bl47p
      effect: NoSchedule
    - key: location
      operator: Equal
      value: bl47p
      effect: NoSchedule
    - key: nodetype
      operator: Equal
      value: training-rig
      effect: NoSchedule

# common values for all IOCs are shared between C++ IOCs and fastcs IOCs
fastcs:
  <<: *ioc-instance
