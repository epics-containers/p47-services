# yaml-language-server: $schema=https://github.com/epics-containers/ioc-adaravis/releases/download/2025.8.1/ibek.ioc.schema.json

ioc_name: "{{ _global.get_env('IOC_NAME') }}"

description: auto-generated by https://github.com/epics-containers/builder2ibek

entities:
  - type: epics.EpicsEnvSet
    name: EPICS_TZ
    value: "GMT0BST"

  - type: epics.EpicsCaMaxArrayBytes
    max_bytes: 3000000

  - type: devIocStats.iocAdminSoft
    IOC: "{{ ioc_name | upper }}"

  - type: ADAravis.aravisCamera
    CLASS: AutoADGenICam
    ID: 192.168.250.28
    P: BL47P-EA-DET-02
    PORT: DET2.CAM
    R: ":DET:"

  - type: ADAravis.aravisSettings
    camera: DET2.CAM

  - type: ADCore.NDProcess
    NDARRAY_PORT: DET2.CAM
    P: BL47P-EA-DET-02
    PORT: DET2.PROC
    R: ":PROC:"
    ENABLED: 1

  - type: ADCore.NDOverlay
    PORT: DET2.OVER
    P: BL47P-EA-DET-02
    R: ":OVER:"
    NDARRAY_PORT: DET2.PROC
    NOverlays: 4
    ENABLED: 1

  - type: ADCore.NDPvxsPlugin
    ENABLED: 1
    NDARRAY_ADDR: 0
    NDARRAY_PORT: DET2.OVER
    P: BL47P-EA-DET-02
    PORT: DET2.PVA
    PVNAME: BL47P-EA-DET-02:TX:PVA
    R: ":TX:"
    TIMEOUT: 0

  - type: ADCore.NDROIStat
    PORT: DET2.ROISTAT
    P: BL47P-EA-DET-02
    R: ":ROISTAT:"
    NDARRAY_PORT: DET2.PROC
    MAX_ROIS: 4
    ENABLED: 1

  - type: epics.dbpf
    pv: BL47P-EA-DET-02:DET:TriggerSource
    value: '"FixedRate"'

  - type: epics.dbpf
    pv: BL47P-EA-DET-02:DET:GC_GevSCPSPacketSize
    value: "1500"

  - type: epics.dbpf
    pv: BL47P-EA-DET-02:DET:ColorMode
    value: '"RGB1"'

  - type: epics.dbpf
    pv: BL47P-EA-DET-02:DET:AcquireTime
    value: "0.5"

  - type: epics.dbpf
    pv: BL47P-EA-DET-02:TX:EnableCallbacks
    value: "1"
