# yaml-language-server: $schema=../../../fastcs/schemas/fastcs-instance-ioc.schema.json

fastcs-instance:
  image:
    repository: ghcr.io/diamondlightsource/fastcs-example
    tag: latest
    pullPolicy: IfNotPresent

  command:
    - fastcs-example
    - run
    - /epics/ioc/config/controller.yaml

  debugMode: true

  # account p47-detector for ALL containers in the pod
  securityContext:
    runAsUser: 37887
    runAsGroup: 37887

  extra_containers:
    - name: temp-controller-simulator
      image: ghcr.io/diamondlightsource/fastcs-example:latest
      command:
        - tickit
        - all
        - /epics/ioc/config/temp_controller.yaml

  volumes:
    - name: beamline-data
      hostPath:
        path: /exports/mybeamline/data/
  volumeMounts:
    - name: beamline-data
      mountPath: /exports/mybeamline/data/
